!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=554)}({0:function(e,t,n){function r(){const e=o(['\n    <ul class="','">\n      ',"\n    </ul>\n  "]);return r=function(){return e},e}function i(){const e=o(['\n        <li class="','">',"</li>\n      "]);return i=function(){return e},e}function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let s;try{s=n(57)}catch(e){}const a=n(78);function c(){return document.querySelector("html").lang}const u=!("object"!=typeof Intl||!Intl||"function"!=typeof Intl.NumberFormat||"object"!=typeof navigator),l=["bytes","kb","mb","gb"];function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise(t=>setTimeout(t,e))}const h=65536,d=16;let p=function(){throw new Error("uninitialized translate function. call setTranslate first")};e.exports={locale:c,fadeOut:function(e){const t=document.querySelector(e).classList;return t.remove("effect--fadeIn"),t.add("effect--fadeOut"),f(300)},delay:f,allowedCopy:function(){return!!!!document.queryCommandSupported&&document.queryCommandSupported("copy")},bytes:function(e){if(e<1)return"0B";const t=Math.min(Math.floor(Math.log10(e)/3),l.length-1),n=Number(e/Math.pow(1024,t)),r=Math.floor(n)===n?0:1;let i=n.toFixed(r);if(u)try{i=n.toLocaleString(c(),{minimumFractionDigits:r,maximumFractionDigits:r})}catch(e){}return p("fileSize",{num:i,units:p(l[t])})},percent:function(e){if(u)try{return e.toLocaleString(c(),{style:"percent"})}catch(e){}return"".concat(Math.floor(100*e),"%")},number:function(e){return u?e.toLocaleString(c()):e.toString()},copyToClipboard:function(e){const t=document.createElement("input");if(t.setAttribute("value",e),t.contentEditable=!0,t.readOnly=!0,document.body.appendChild(t),navigator.userAgent.match(/iphone|ipad|ipod/i)){const n=document.createRange();n.selectNodeContents(t);const r=getSelection();r.removeAllRanges(),r.addRange(n),t.setSelectionRange(0,e.length)}else t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n},arrayToB64:function(e){return a.fromByteArray(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},b64ToArray:function(e){return a.toByteArray(e+"===".slice((e.length+3)%4))},loadShim:function(e){return new Promise((t,n)=>{const r=document.createElement("script");r.src=e,r.addEventListener("load",()=>t(!0)),r.addEventListener("error",()=>t(!1)),document.head.appendChild(r)})},isFile:function(e){return/^[0-9a-fA-F]{10,16}$/.test(e)},openLinksInNewTab:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=e||Array.from(document.querySelectorAll("a:not([target])")),t?e.forEach(e=>{e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")}):e.forEach(e=>{e.removeAttribute("target"),e.removeAttribute("rel")}),e},browserName:function(){try{return/firefox/i.test(navigator.userAgent)?"firefox":/edge/i.test(navigator.userAgent)?"edge":/trident/i.test(navigator.userAgent)?"ie":/chrome/i.test(navigator.userAgent)?"chrome":/safari/i.test(navigator.userAgent)?"safari":/send android/i.test(navigator.userAgent)?"android-app":"other"}catch(e){return"unknown"}},streamToArrayBuffer:async function(e,t){const n=e.getReader();let r=await n.read();if(t){const e=new Uint8Array(t);let i=0;for(;!r.done;)e.set(r.value,i),i+=r.value.length,r=await n.read();return e.buffer}const i=[];let o=0;for(;!r.done;)i.push(r.value),o+=r.value.length,r=await n.read();let s=0;const a=new Uint8Array(o);for(const e of i)a.set(e,s),s+=e.length;return a.buffer},list:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const o=e.map(e=>s(i(),n,e));return s(r(),t,o)},secondsToL10nId:function(e){return e<3600?{id:"timespanMinutes",num:Math.floor(e/60)}:e<86400?{id:"timespanHours",num:Math.floor(e/3600)}:{id:"timespanDays",num:Math.floor(e/86400)}},timeLeft:function(e){if(e<1)return{id:"linkExpiredAlt"};const t=Math.floor(e/1e3/60),n=Math.floor(t/60),r=Math.floor(n/24);return r>=1?{id:"expiresDaysHoursMinutes",days:r,hours:n%24,minutes:t%60}:n>=1?{id:"expiresHoursMinutes",hours:n,minutes:t%60}:0===n?0===t?{id:"expiresMinutes",minutes:"< 1"}:{id:"expiresMinutes",minutes:t}:null},platform:function(){return"object"==typeof Android?"android":"web"},encryptedSize:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:d)+1;return 21+e+n*Math.ceil(e/(t-n))},setTranslate:function(e){p=e}}},102:function(e,t,n){"use strict";n.r(t);var r=n(45),i=n.n(r),o=n(38),s=n(34),a=n(0),c=n(8);class u extends i.a{constructor(){super("FileSender"),this.keychain=new s.a,this.reset()}get progressRatio(){return this.progress[0]/this.progress[1]}get progressIndefinite(){return-1===["fileSizeProgress","notifyUploadEncryptDone"].indexOf(this.msg)}get sizes(){return{partialSize:Object(a.bytes)(this.progress[0]),totalSize:Object(a.bytes)(this.progress[1])}}reset(){this.uploadRequest=null,this.msg="importingFile",this.progress=[0,1],this.cancelled=!1}cancel(){this.cancelled=!0,this.uploadRequest&&this.uploadRequest.cancel()}async upload(e,t){if(this.cancelled)throw new Error(0);this.msg="encryptingFile",this.emit("encrypting");const n=Object(a.encryptedSize)(e.size),r=await this.keychain.encryptStream(e.stream),i=await this.keychain.encryptMetadata(e),s=await this.keychain.authKeyB64();if(this.uploadRequest=Object(c.o)(r,i,s,e.timeLimit,e.dlimit,t,e=>{this.progress=[e,n],this.emit("progress")}),this.cancelled)throw new Error(0);this.msg="fileSizeProgress",this.emit("progress");try{const t=await this.uploadRequest.result;this.msg="notifyUploadEncryptDone",this.uploadRequest=null,this.progress=[1,1];const n=Object(a.arrayToB64)(this.keychain.rawSecret);return new o.a({id:t.id,url:"".concat(t.url,"#").concat(n),name:e.name,size:e.size,manifest:e.manifest,time:t.duration,speed:e.size/(t.duration/1e3),createdAt:Date.now(),expiresAt:Date.now()+1e3*e.timeLimit,secretKey:n,nonce:this.keychain.nonce,ownerToken:t.ownerToken,dlimit:e.dlimit,timeLimit:e.timeLimit})}catch(e){throw this.msg="errorPageHeader",this.uploadRequest=null,e}}}var l=n(17),f=n(16);var h=f.Buffer.from&&f.Buffer.alloc&&f.Buffer.allocUnsafe&&f.Buffer.allocUnsafeSlow?f.Buffer.from:e=>new f.Buffer(e);let d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(d=new Int32Array(d));var p=function(e,t){const n=(e,n)=>t(e,n)>>>0;return n.signed=t,n.unsigned=n,n.model=e,n}("crc-32",function(e,t){f.Buffer.isBuffer(e)||(e=h(e));let n=0===t?0:-1^~~t;for(let t=0;t<e.length;t++){const r=e[t];n=d[255&(n^r)]^n>>>8}return-1^n});const m=new TextEncoder;class g{constructor(e){this.name=m.encode(e.name),this.size=e.size,this.bytesRead=0,this.crc=null,this.dateTime=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{date:e.getFullYear()-1980<<9|e.getMonth()+1<<5|e.getDate(),time:e.getHours()<<11|e.getMinutes()<<5|Math.floor(e.getSeconds()/2)}}()}get header(){const e=new ArrayBuffer(30+this.name.byteLength),t=new DataView(e);t.setUint32(0,67324752,!0),t.setUint16(4,20,!0),t.setUint16(6,8,!0),t.setUint16(8,0,!0),t.setUint16(10,this.dateTime.time,!0),t.setUint16(12,this.dateTime.date,!0),t.setUint32(14,0,!0),t.setUint32(18,0,!0),t.setUint32(22,0,!0),t.setUint16(26,this.name.byteLength,!0),t.setUint16(28,0,!0);for(let e=0;e<this.name.byteLength;e++)t.setUint8(30+e,this.name[e]);return new Uint8Array(e)}get dataDescriptor(){const e=new ArrayBuffer(16),t=new DataView(e);return t.setUint32(0,134695760,!0),t.setUint32(4,this.crc,!0),t.setUint32(8,this.size,!0),t.setUint32(12,this.size,!0),new Uint8Array(e)}directoryRecord(e){const t=new ArrayBuffer(46+this.name.byteLength),n=new DataView(t);n.setUint32(0,33639248,!0),n.setUint16(4,20,!0),n.setUint16(6,20,!0),n.setUint16(8,8,!0),n.setUint16(10,0,!0),n.setUint16(12,this.dateTime.time,!0),n.setUint16(14,this.dateTime.date,!0),n.setUint32(16,this.crc,!0),n.setUint32(20,this.size,!0),n.setUint32(24,this.size,!0),n.setUint16(28,this.name.byteLength,!0),n.setUint16(30,0,!0),n.setUint16(32,0,!0),n.setUint16(34,0,!0),n.setUint16(36,0,!0),n.setUint32(38,0,!0),n.setUint32(42,e,!0);for(let e=0;e<this.name.byteLength;e++)n.setUint8(46+e,this.name[e]);return new Uint8Array(t)}get byteLength(){return this.size+this.name.byteLength+30+16}append(e,t){this.bytesRead+=e.byteLength;const n=e.byteLength-Math.max(this.bytesRead-this.size,0),r=e.slice(0,n);if(this.crc=p(r,this.crc),t.enqueue(r),n<e.byteLength)return e.slice(n,e.byteLength)}}function y(e,t){let n=0,r=0;for(let i=0;i<e.length;i++){const o=e[i],s=o.directoryRecord(n);n+=o.byteLength,t.enqueue(s),r+=s.byteLength}t.enqueue(function(e,t,n){const r=new ArrayBuffer(22),i=new DataView(r);return i.setUint32(0,101010256,!0),i.setUint16(4,0,!0),i.setUint16(6,0,!0),i.setUint16(8,e,!0),i.setUint16(10,e,!0),i.setUint32(12,t,!0),i.setUint32(16,n,!0),i.setUint16(20,0,!0),new Uint8Array(r)}(e.length,r,n))}class w{constructor(e,t){this.files=e,this.fileIndex=0,this.file=null,this.reader=t.getReader(),this.nextFile(),this.extra=null}nextFile(){this.file=this.files[this.fileIndex++]}async pull(e){if(!this.file)return y(this.files,e),e.close();if(0===this.file.bytesRead&&(e.enqueue(this.file.header),this.extra&&(this.extra=this.file.append(this.extra,e))),this.file.bytesRead>=this.file.size)return e.enqueue(this.file.dataDescriptor),this.nextFile(),this.pull(e);const t=await this.reader.read();if(t.done)return this.nextFile(),this.pull(e);this.extra=this.file.append(t.value,e)}}class b{constructor(e,t){this.files=e.files.map(e=>new g(e)),this.source=t}get stream(){return new ReadableStream(new w(this.files,this.source))}get size(){return this.files.reduce((e,t)=>e+2*t.byteLength-t.size,0)+22}}class v extends i.a{constructor(e){super("FileReceiver"),this.keychain=new s.a(e.secretKey,e.nonce),e.requiresPassword&&this.keychain.setPassword(e.password,e.url),this.fileInfo=e,this.reset()}get progressRatio(){return this.progress[0]/this.progress[1]}get progressIndefinite(){return"downloading"!==this.state}get sizes(){return{partialSize:Object(a.bytes)(this.progress[0]),totalSize:Object(a.bytes)(this.progress[1])}}cancel(){this.downloadRequest&&this.downloadRequest.cancel()}reset(){this.msg="fileSizeProgress",this.state="initialized",this.progress=[0,1]}async getMetadata(){const e=await Object(c.h)(this.fileInfo.id,this.keychain);this.fileInfo.name=e.name,this.fileInfo.type=e.type,this.fileInfo.iv=e.iv,this.fileInfo.size=+e.size,this.fileInfo.manifest=e.manifest,this.state="ready"}sendMessageToSw(e){return new Promise((t,n)=>{const r=new MessageChannel;r.port1.onmessage=function(e){void 0===e.data?n("bad response from serviceWorker"):void 0!==e.data.error?n(e.data.error):t(e.data)},navigator.serviceWorker.controller.postMessage(e,[r.port2])})}async downloadBlob(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="downloading",this.downloadRequest=await Object(c.b)(this.fileInfo.id,this.keychain,e=>{this.progress=[e,this.fileInfo.size],this.emit("progress")});try{const t=await this.downloadRequest.result;this.downloadRequest=null,this.msg="decryptingFile",this.state="decrypting",this.emit("decrypting");let n=this.fileInfo.size,r=this.keychain.decryptStream(Object(l.a)(t));if("send-archive"===this.fileInfo.type){const e=new b(this.fileInfo.manifest,r);r=e.stream,n=e.size}const i=await Object(a.streamToArrayBuffer)(r,n);e||await async function(e){return new Promise(function(t,n){const r=new DataView(e.plaintext),i=new Blob([r],{type:e.type});if(navigator.msSaveBlob)return navigator.msSaveBlob(i,e.name),t();if(/iPhone|fxios/i.test(navigator.userAgent)){const r=new FileReader;r.addEventListener("loadend",function(){if(r.error)return n(r.error);if(r.result){const t=document.createElement("a");t.href=r.result,t.download=e.name,document.body.appendChild(t),t.click()}t()}),r.readAsDataURL(i)}else{const n=URL.createObjectURL(i),r=document.createElement("a");r.href=n,r.download=e.name,document.body.appendChild(r),r.click(),URL.revokeObjectURL(n),setTimeout(t,100)}})}({plaintext:i,name:decodeURIComponent(this.fileInfo.name),type:this.fileInfo.type}),this.msg="downloadFinish",this.emit("complete"),this.state="complete"}catch(e){throw this.downloadRequest=null,e}}async downloadStream(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Date.now(),n=e=>{this.progress=[e,this.fileInfo.size],this.emit("progress")};this.downloadRequest={cancel:()=>{this.sendMessageToSw({request:"cancel",id:this.fileInfo.id})}};try{this.state="downloading";const r={request:"init",id:this.fileInfo.id,filename:this.fileInfo.name,type:this.fileInfo.type,manifest:this.fileInfo.manifest,key:this.fileInfo.secretKey,requiresPassword:this.fileInfo.requiresPassword,password:this.fileInfo.password,url:this.fileInfo.url,size:this.fileInfo.size,nonce:this.keychain.nonce,noSave:e};if(await this.sendMessageToSw(r),n(0),e){const e=await fetch(Object(c.d)("/api/download/".concat(this.fileInfo.id)));if(200!==e.status)throw new Error(e.status)}else{const e="/api/download/".concat(this.fileInfo.id);let t=Object(c.d)(e);t===e&&(t="".concat(location.protocol,"//").concat(location.host).concat(e));const n=document.createElement("a");n.href=t,document.body.appendChild(n),n.click()}let i=0,o=0;for(;i<this.fileInfo.size;){const e=await this.sendMessageToSw({request:"progress",id:this.fileInfo.id});if(e.progress===i?o++:o=0,o>30){const e=new Error("hung download");throw e.duration=Date.now()-t,e.size=this.fileInfo.size,e.progress=i,e}n(i=e.progress),await Object(a.delay)(1e3)}this.downloadRequest=null,this.msg="downloadFinish",this.emit("complete"),this.state="complete"}catch(e){if(this.downloadRequest=null,"cancelled"===e||"400"===e.message)throw new Error(0);throw e}}download(e){return e.stream?this.downloadStream(e.noSave):this.downloadBlob(e.noSave)}}var A=n(18),E=n(61),x=n.n(E),_=n(80),S=n.n(_),k=n(81),L=n.n(k),R=n(82),O=n.n(R),I=n(83),T=n.n(I);t.default=function(e,t){let n=0,r=!1;function i(){t.emit("render")}async function o(){const t=await e.user.syncFileList();(t.incoming||t.downloadCount)&&i()}function s(){r&&t.emit("DOMTitleChange",Object(a.percent)(e.transfer.progressRatio)),i()}t.on("DOMContentLoaded",()=>{document.addEventListener("blur",()=>r=!0),document.addEventListener("focus",()=>{r=!1,t.emit("DOMTitleChange","Firefox Send")}),o()}),t.on("render",()=>{n=Date.now()}),t.on("login",t=>{e.user.login(t)}),t.on("logout",()=>{e.user.logout(),A.loggedOut({trigger:"button"}),t.emit("pushState","/")}),t.on("removeUpload",t=>{e.archive.remove(t),0===e.archive.numFiles&&e.archive.clear(),i()}),t.on("delete",async t=>{try{A.deletedUpload({size:t.size,time:t.time,speed:t.speed,type:t.type,ttl:t.expiresAt-Date.now(),location:location}),e.storage.remove(t.id),await t.del()}catch(t){e.sentry.captureException(t)}i()}),t.on("cancel",()=>{e.transfer.cancel()}),t.on("addFiles",async n=>{let{files:r}=n;if(r.length<1)return;const o=e.user.maxSize;try{e.archive.addFiles(r,o,e.LIMITS.MAX_FILES_PER_ARCHIVE)}catch(n){if("fileTooBig"===n.message&&o<e.LIMITS.MAX_FILE_SIZE)return t.emit("signup-cta","size");e.modal=x()(e.translate(n.message,{size:Object(a.bytes)(o),count:e.LIMITS.MAX_FILES_PER_ARCHIVE}))}i()}),t.on("signup-cta",t=>{const n=e.query;e.user.startAuthFlow(t,{campaign:n.utm_campaign,content:n.utm_content,medium:n.utm_medium,source:n.utm_source,term:n.utm_term}),e.modal=O()(t),i()}),t.on("authenticate",async(n,r)=>{try{await e.user.finishLogin(n,r),await e.user.syncFileList(),t.emit("replaceState","/")}catch(e){t.emit("replaceState","/error"),setTimeout(i)}}),t.on("upload",async()=>{if(e.storage.files.length>=e.LIMITS.MAX_ARCHIVES_PER_USER)return e.modal=x()(e.translate("tooManyArchives",{count:e.LIMITS.MAX_ARCHIVES_PER_USER})),i();const n=e.archive,r=new u;r.on("progress",s),r.on("encrypting",i),r.on("complete",i),e.transfer=r,e.uploading=!0,i();const o=Object(a.openLinksInNewTab)();await Object(a.delay)(200);const c=Date.now();try{const s=await r.upload(n,e.user.bearerToken);e.storage.totalUploads+=1;const u=Date.now()-c;A.completedUpload(n,u),e.storage.addFile(s),n.password&&t.emit("password",{password:n.password,file:s}),e.modal=e.capabilities.share?L()(s.name,s.url):S()(s.name,s.url)}catch(r){"0"===r.message?(A.cancelledUpload(n,r.duration),i()):(console.error(r),e.sentry.withScope(t=>{t.setExtra("duration",r.duration),t.setExtra("size",r.size),e.sentry.captureException(r)}),A.stoppedUpload(n,r.duration),t.emit("pushState","/error"))}finally{Object(a.openLinksInNewTab)(o,!1),n.clear(),e.uploading=!1,e.transfer=null,await e.user.syncFileList(),i()}}),t.on("password",async t=>{let{password:n,file:r}=t;try{e.settingPassword=!0,i(),await r.setPassword(n),e.storage.writeFile(r),await Object(a.delay)(1e3)}catch(t){console.error(t),e.passwordSetError=t}finally{e.settingPassword=!1}i()}),t.on("getMetadata",async()=>{const n=e.fileInfo,r=new v(n);try{await r.getMetadata(),e.transfer=r}catch(e){if(("401"===e.message||"404"===e.message)&&(n.password=null,!n.requiresPassword))return t.emit("pushState","/404")}i()}),t.on("download",async n=>{e.transfer.on("progress",s),e.transfer.on("decrypting",i),e.transfer.on("complete",i);const r=Object(a.openLinksInNewTab)(),o=n.size,c=Date.now();try{const s=e.transfer.download({stream:e.capabilities.streamDownload});i(),await s,e.storage.totalDownloads+=1;const u=Date.now()-c;A.completedDownload({size:o,duration:u,password_protected:n.requiresPassword})}catch(r){if("0"===r.message)e.transfer.reset(),i();else{e.transfer=null;const i="404"===r.message?"/404":"/error";if("/error"===i){e.sentry.withScope(t=>{t.setExtra("duration",r.duration),t.setExtra("size",r.size),t.setExtra("progress",r.progress),e.sentry.captureException(r)});const t=Date.now()-c;A.stoppedDownload({size:o,duration:t,password_protected:n.requiresPassword})}t.emit("pushState",i)}}finally{Object(a.openLinksInNewTab)(r,!1)}}),t.on("copy",e=>{let{url:t}=e;Object(a.copyToClipboard)(t)}),t.on("closeModal",()=>{e.PREFS.surveyUrl&&["copy","share"].includes(e.modal.type)&&Object(a.locale)().startsWith("en")&&(e.storage.totalUploads>1||e.storage.totalDownloads>0)&&!e.user.surveyed?(e.user.surveyed=!0,e.modal=T()()):e.modal=null,i()}),setInterval(()=>{e.modal||"/"!==e.route||o()},12e4),setInterval(()=>{!e.modal&&"/"===e.route&&e.storage.files.length>0&&Date.now()-n>3e4&&i()},6e4)}},105:function(e){e.exports=JSON.parse('{"name":"firefox-send","description":"File Sharing Experiment","version":"3.0.21","author":"Mozilla (https://mozilla.org)","repository":"mozilla/send","homepage":"https://github.com/mozilla/send/","license":"MPL-2.0","private":true,"scripts":{"clean":"rimraf dist","build":"npm run clean && webpack","lint":"npm-run-all lint:*","lint:css":"stylelint app/*.css app/**/*.css","lint:js":"eslint .","lint-locales":"node scripts/lint-locales","lint-locales:dev":"npm run lint-locales","lint-locales:prod":"npm run lint-locales -- --production","format":"prettier \'**/*.js\' \'assets/*.css\' --single-quote --write","get-prod-locales":"node scripts/get-prod-locales","get-prod-locales:write":"npm run get-prod-locales -- --write","contributors":"git shortlog -s | awk -F\\\\t \'{print $2}\' > CONTRIBUTORS","release":"npm-run-all contributors changelog","test":"npm-run-all test:*","test:backend":"nyc --reporter=lcovonly mocha --reporter=min test/backend","test:frontend":"cross-env NODE_ENV=development node test/frontend/runner.js","test:report":"nyc report --reporter=html","test-integration":"cross-env NODE_ENV=development wdio test/wdio.docker.conf.js","circleci-test-integration":"cross-env NODE_ENV=development wdio test/wdio.circleci.conf.js","start":"npm run clean && cross-env NODE_ENV=development L10N_DEV=true FXA_CLIENT_ID=fced6b5e3f4c66b9 BASE_URL=http://localhost:8080 webpack-dev-server --mode=development","android":"cross-env ANDROID=1 npm start","prod":"node server/bin/prod.js"},"husky":{"hooks":{"pre-commit":"lint-staged","pre-push":"npm test","post-merge":"npm install","post-checkout":"scripts/sync-npm-dependencies.sh"}},"lint-staged":{"*.js":["prettier --single-quote --write","eslint","git add"],"*.css":["prettier --single-quote --write","stylelint","git add"]},"nyc":{"reporter":["text"],"cache":true},"engines":{"node":">=10.0.0 <11.0.0"},"devDependencies":{"@babel/core":"^7.7.2","@babel/plugin-proposal-class-properties":"^7.7.0","@babel/plugin-syntax-dynamic-import":"^7.2.0","@babel/preset-env":"^7.7.1","@dannycoates/webcrypto-liner":"^0.1.37","@fullhuman/postcss-purgecss":"^1.3.0","@mattiasbuelens/web-streams-polyfill":"0.2.1","@sentry/browser":"^5.8.0","asmcrypto.js":"^0.22.0","babel-loader":"^8.0.6","babel-plugin-istanbul":"^5.2.0","base64-js":"^1.3.1","content-disposition":"^0.5.3","copy-webpack-plugin":"^5.0.5","core-js":"^3.4.0","crc":"^3.8.0","cross-env":"^6.0.3","css-loader":"^3.2.0","css-mqpacker":"^7.0.0","cssnano":"^4.1.10","eslint":"^6.6.0","eslint-config-prettier":"^6.5.0","eslint-plugin-mocha":"^6.2.1","eslint-plugin-node":"^10.0.0","eslint-plugin-security":"^1.4.0","expose-loader":"^0.7.5","extract-loader":"^3.1.0","extract-text-webpack-plugin":"^4.0.0-beta.0","fast-text-encoding":"^1.0.0","file-loader":"^4.2.0","git-rev-sync":"^1.12.0","html-loader":"^0.5.5","http_ece":"^1.1.0","husky":"^3.0.9","intl-pluralrules":"^1.1.1","lint-staged":"^9.4.2","mocha":"^6.2.2","morgan":"^1.9.1","nanobus":"^4.4.0","nanohtml":"^1.9.0","nanotiming":"^7.3.1","npm-run-all":"^4.1.5","nyc":"^14.1.1","postcss-loader":"^3.0.0","postcss-preset-env":"^6.7.0","prettier":"^1.19.1","proxyquire":"^2.1.3","puppeteer":"^2.0.0","raw-loader":"^3.1.0","redis-mock":"^0.47.0","rimraf":"^3.0.0","script-loader":"^0.7.2","sinon":"^7.5.0","string-hash":"^1.1.3","stylelint":"^11.1.1","stylelint-config-standard":"^19.0.0","stylelint-no-unsupported-browser-features":"^3.0.2","svgo":"^1.3.2","svgo-loader":"^2.2.1","tailwindcss":"^1.1.3","val-loader":"^1.1.1","wdio-docker-service":"^1.4.2","wdio-dot-reporter":"0.0.10","wdio-firefox-profile-service":"^0.1.3","wdio-mocha-framework":"^0.6.3","wdio-sauce-service":"^0.4.14","wdio-selenium-standalone-service":"0.0.12","wdio-spec-reporter":"^0.1.5","webdriverio":"^4.14.4","webpack":"4.38.0","webpack-cli":"^3.3.10","webpack-dev-middleware":"^3.7.2","webpack-dev-server":"^3.9.0","webpack-manifest-plugin":"^2.2.0","webpack-unassert-loader":"^1.2.0"},"dependencies":{"@dannycoates/express-ws":"^5.0.3","@fluent/bundle":"^0.13.0","@fluent/langneg":"^0.3.0","@google-cloud/storage":"^4.1.1","@sentry/node":"^5.8.0","aws-sdk":"^2.568.0","body-parser":"^1.19.0","choo":"^7.0.0","cldr-core":"^35.1.0","configstore":"github:dannycoates/configstore#master","convict":"^5.2.0","express":"^4.17.1","fxa-geodb":"^1.0.4","helmet":"^3.21.2","mkdirp":"^0.5.1","mozlog":"^2.2.0","node-fetch":"^2.6.0","redis":"^2.8.0","selenium-standalone":"^6.15.6","ua-parser-js":"^0.7.20"},"availableLanguages":["en-US","ar","ast","be","bn","br","ca","cak","cs","cy","da","de","dsb","el","en-CA","en-GB","es-AR","es-CL","es-ES","es-MX","et","eu","fi","fr","fy-NL","he","hr","hsb","hu","ia","id","it","ja","ka","kab","ko","lt","meh","ml","nb-NO","nl","nn-NO","oc","pa-IN","pl","ppl","pt-BR","pt-PT","quc","ro","ru","sk","sl","sq","sr","su","sv-SE","te","th","tr","uk","vi","zgh","zh-CN","zh-TW"]}')},11:function(e,t,n){"use strict";var r=/\n[\s]+$/,i=/^\n[\s]+/,o=/[\s]+$/,s=/^[\s]+/,a=/[\n\s]+/g,c=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],u=["code","pre","textarea"];e.exports=function e(t,n){if(Array.isArray(n))for(var l,f,h=t.nodeName.toLowerCase(),d=!1,p=0,m=n.length;p<m;p++){var g=n[p];if(Array.isArray(g))e(t,g);else{("number"==typeof g||"boolean"==typeof g||"function"==typeof g||g instanceof Date||g instanceof RegExp)&&(g=g.toString());var y=t.childNodes[t.childNodes.length-1];if("string"==typeof g)d=!0,y&&"#text"===y.nodeName?y.nodeValue+=g:(g=t.ownerDocument.createTextNode(g),t.appendChild(g),y=g),p===m-1&&(d=!1,-1===c.indexOf(h)&&-1===u.indexOf(h)?""===(l=y.nodeValue.replace(i,"").replace(o,"").replace(r,"").replace(a," "))?t.removeChild(y):y.nodeValue=l:-1===u.indexOf(h)&&(f=0===p?"":" ",l=y.nodeValue.replace(i,f).replace(s," ").replace(o,"").replace(r,"").replace(a," "),y.nodeValue=l));else if(g&&g.nodeType){d&&(d=!1,-1===c.indexOf(h)&&-1===u.indexOf(h)?""===(l=y.nodeValue.replace(i,"").replace(r," ").replace(a," "))?t.removeChild(y):y.nodeValue=l:-1===u.indexOf(h)&&(l=y.nodeValue.replace(s," ").replace(i,"").replace(r," ").replace(a," "),y.nodeValue=l));var w=g.nodeName;w&&(h=w.toLowerCase()),t.appendChild(g)}}}}},120:function(e,t){var n="undefined"!=typeof window;function r(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}r.prototype.push=function(e){this.queue.push(e),this.schedule()},r.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},r.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return n?(window._nanoScheduler||(window._nanoScheduler=new r(!0)),e=window._nanoScheduler):e=new r,e}},122:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}},125:function(e,t,n){e.exports={"add.svg":n(126),"addfiles.svg":n(127),"android-chrome-192x192.png":n(128),"android-chrome-512x512.png":n(129),"apple-touch-icon.png":n(130),"bg.svg":n(131),"blue_file.svg":n(132),"close-16.svg":n(133),"completed.svg":n(134),"copy-16.svg":n(135),"dl.svg":n(136),"error.svg":n(137),"favicon-16x16.png":n(138),"favicon-32x32.png":n(139),"feedback.svg":n(140),"firefox_logo-only.svg":n(141),"icon.svg":n(142),"intro.svg":n(143),"lock.svg":n(144),"master-logo.svg":n(145),"mozilla-logo.svg":n(146),"notFound.svg":n(147),"safari-pinned-tab.svg":n(148),"select-arrow.svg":n(149),"send-fb.jpg":n(150),"send-twitter.jpg":n(151),"share-24.svg":n(152),"user.svg":n(153),"wordmark.svg":n(154)}},126:function(e,t,n){e.exports=n.p+"add.8cf99bc2.svg"},127:function(e,t,n){e.exports=n.p+"addfiles.93ef7f01.svg"},128:function(e,t,n){e.exports=n.p+"android-chrome-192x192.f16df4ad.png"},129:function(e,t,n){e.exports=n.p+"android-chrome-512x512.c3fd08e0.png"},130:function(e,t,n){e.exports=n.p+"apple-touch-icon.d8ff4845.png"},131:function(e,t,n){e.exports=n.p+"bg.c43902aa.svg"},132:function(e,t,n){e.exports=n.p+"blue_file.abdc0799.svg"},133:function(e,t,n){e.exports=n.p+"close-16.77c3dfdc.svg"},134:function(e,t,n){e.exports=n.p+"completed.1797152b.svg"},135:function(e,t,n){e.exports=n.p+"copy-16.6ab7b3f4.svg"},136:function(e,t,n){e.exports=n.p+"dl.5594b8e0.svg"},137:function(e,t,n){e.exports=n.p+"error.e90a5dba.svg"},138:function(e,t,n){e.exports=n.p+"favicon-16x16.dd949bf3.png"},139:function(e,t,n){e.exports=n.p+"favicon-32x32.acc41fc7.png"},140:function(e,t,n){e.exports=n.p+"feedback.9a713904.svg"},141:function(e,t,n){e.exports=n.p+"firefox_logo-only.59eb3e62.svg"},142:function(e,t,n){e.exports=n.p+"icon.fd04d81a.svg"},143:function(e,t,n){e.exports=n.p+"intro.96f62c7e.svg"},144:function(e,t,n){e.exports=n.p+"lock.c02d45d6.svg"},145:function(e,t,n){e.exports=n.p+"master-logo.1a3d1a78.svg"},146:function(e,t,n){e.exports=n.p+"mozilla-logo.4ea30604.svg"},147:function(e,t,n){e.exports=n.p+"notFound.0ea747af.svg"},148:function(e,t,n){e.exports=n.p+"safari-pinned-tab.c54acb0b.svg"},149:function(e,t,n){e.exports=n.p+"select-arrow.1dd68534.svg"},150:function(e,t,n){e.exports=n.p+"send-fb.358d4b57.jpg"},151:function(e,t,n){e.exports=n.p+"send-twitter.95d5f4ac.jpg"},152:function(e,t,n){e.exports=n.p+"share-24.c00952be.svg"},153:function(e,t,n){e.exports=n.p+"user.72da5ab5.svg"},154:function(e,t,n){e.exports=n.p+"wordmark.d113c385.svg"},155:function(e,t,n){e.exports=n(156)(document)},156:function(e,t,n){"use strict";var r=n(157),i=n(11),o=n(159),s=n(160),a=n(91),c="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink",l="!--";e.exports=function(e){function t(t,n,r){var f;-1!==o.indexOf(t)&&(n.namespace=c);var h=!1;n.namespace&&(h=n.namespace,delete n.namespace);var d=!1;if(n.is&&(d=n.is,delete n.is),h)f=d?e.createElementNS(h,t,{is:d}):e.createElementNS(h,t);else{if(t===l)return e.createComment(n.comment);f=d?e.createElement(t,{is:d}):e.createElement(t)}for(var p in n)if(n.hasOwnProperty(p)){var m=p.toLowerCase(),g=n[p];if("classname"===m&&(m="class",p="class"),"htmlFor"===p&&(p="for"),-1!==s.indexOf(m))if("true"===String(g))g=m;else if("false"===String(g))continue;"on"===m.slice(0,2)||-1!==a.indexOf(m)?f[p]=g:h?"xlink:href"===p?f.setAttributeNS(u,p,g):/^xmlns($|:)/i.test(p)||f.setAttributeNS(null,p,g):f.setAttribute(p,g)}return i(f,r),f}var n=r(t,{comments:!0,createFragment:function t(n){for(var r=e.createDocumentFragment(),i=0;i<n.length;i++)null!=n[i]&&(Array.isArray(n[i])?r.appendChild(t(n[i])):("string"==typeof n[i]&&(n[i]=e.createTextNode(n[i])),r.appendChild(n[i])));return r}});return n.default=n,n.createComment=t,n}},157:function(e,t,n){var r=n(158),i=1,o=2,s=3,a=4,c=5,u=6,l=7,f=8,h=9,d=10,p=11,m=12,g=13;function y(e){return e===h||e===d}e.exports=function(e,t){t||(t={});var n=t.concat||function(e,t){return String(e)+String(t)};return!1!==t.attrToProp&&(e=r(e)),function(r){for(var v=i,A="",E=arguments.length,x=[],_=0;_<r.length;_++)if(_<E-1){var S=arguments[_+1],k=D(r[_]),L=v;L===d&&(L=f),L===h&&(L=f),L===l&&(L=f),L===a&&(L=c),L===o?"/"===A?(k.push([o,"/",S]),A=""):k.push([o,S]):L===g&&t.comments?A+=String(S):L!==g&&k.push([0,L,S]),x.push.apply(x,k)}else x.push.apply(x,D(r[_]));var R=[null,{},[]],O=[[R,-1]];for(_=0;_<x.length;_++){var I=O[O.length-1][0],T=(k=x[_])[0];if(T===o&&/^\//.test(k[1])){var U=O[O.length-1][1];O.length>1&&(O.pop(),O[O.length-1][0][2][U]=e(I[0],I[1],I[2].length?I[2]:void 0))}else if(T===o){var P=[k[1],{},[]];I[2].push(P),O.push([P,I[2].length-1])}else if(T===c||0===T&&k[1]===c){for(var B,M="";_<x.length;_++)if(x[_][0]===c)M=n(M,x[_][1]);else{if(0!==x[_][0]||x[_][1]!==c)break;if("object"!=typeof x[_][2]||M)M=n(M,x[_][2]);else for(B in x[_][2])x[_][2].hasOwnProperty(B)&&!I[1][B]&&(I[1][B]=x[_][2][B])}x[_][0]===p&&_++;for(var C=_;_<x.length;_++)if(x[_][0]===f||x[_][0]===c)I[1][M]?""===x[_][1]||(I[1][M]=n(I[1][M],x[_][1])):I[1][M]=w(x[_][1]);else{if(0!==x[_][0]||x[_][1]!==f&&x[_][1]!==c){!M.length||I[1][M]||_!==C||x[_][0]!==s&&x[_][0]!==m||(I[1][M]=M.toLowerCase()),x[_][0]===s&&_--;break}I[1][M]?""===x[_][2]||(I[1][M]=n(I[1][M],x[_][2])):I[1][M]=w(x[_][2])}}else if(T===c)I[1][k[1]]=!0;else if(0===T&&k[1]===c)I[1][k[2]]=!0;else if(T===s){if(b(I[0])&&O.length){U=O[O.length-1][1];O.pop(),O[O.length-1][0][2][U]=e(I[0],I[1],I[2].length?I[2]:void 0)}}else if(0===T&&k[1]===i)void 0===k[2]||null===k[2]?k[2]="":k[2]||(k[2]=n("",k[2])),Array.isArray(k[2][0])?I[2].push.apply(I[2],k[2]):I[2].push(k[2]);else if(T===i)I[2].push(k[1]);else if(T!==p&&T!==m)throw new Error("unhandled: "+T)}if(R[2].length>1&&/^\s*$/.test(R[2][0])&&R[2].shift(),R[2].length>2||2===R[2].length&&/\S/.test(R[2][1])){if(t.createFragment)return t.createFragment(R[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(R[2][0])&&"string"==typeof R[2][0][0]&&Array.isArray(R[2][0][2])&&(R[2][0]=e(R[2][0][0],R[2][0][1],R[2][0][2])),R[2][0];function D(e){var n=[];v===l&&(v=a);for(var r=0;r<e.length;r++){var w=e.charAt(r);v===i&&"<"===w?(A.length&&n.push([i,A]),A="",v=o):">"!==w||y(v)||v===g?v===g&&/-$/.test(A)&&"-"===w?(t.comments&&n.push([f,A.substr(0,A.length-1)]),A="",v=i):v===o&&/^!--$/.test(A)?(t.comments&&n.push([o,A],[c,"comment"],[p]),A=w,v=g):v===i||v===g?A+=w:v===o&&"/"===w&&A.length||(v===o&&/\s/.test(w)?(A.length&&n.push([o,A]),A="",v=a):v===o?A+=w:v===a&&/[^\s"'=\/]/.test(w)?(v=c,A=w):v===a&&/\s/.test(w)?(A.length&&n.push([c,A]),n.push([m])):v===c&&/\s/.test(w)?(n.push([c,A]),A="",v=u):v===c&&"="===w?(n.push([c,A],[p]),A="",v=l):v===c?A+=w:v!==u&&v!==a||"="!==w?v!==u&&v!==a||/\s/.test(w)?v===l&&'"'===w?v=d:v===l&&"'"===w?v=h:v===d&&'"'===w?(n.push([f,A],[m]),A="",v=a):v===h&&"'"===w?(n.push([f,A],[m]),A="",v=a):v!==l||/\s/.test(w)?v===f&&/\s/.test(w)?(n.push([f,A],[m]),A="",v=a):v!==f&&v!==h&&v!==d||(A+=w):(v=f,r--):(n.push([m]),/[\w-]/.test(w)?(A+=w,v=c):v=a):(n.push([p]),v=l)):(v===o&&A.length?n.push([o,A]):v===c?n.push([c,A]):v===f&&A.length&&n.push([f,A]),n.push([s]),A="",v=i)}return v===i&&A.length?(n.push([i,A]),A=""):v===f&&A.length?(n.push([f,A]),A=""):v===d&&A.length?(n.push([f,A]),A=""):v===h&&A.length?(n.push([f,A]),A=""):v===c&&(n.push([c,A]),A=""),n}};function w(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:null==e?e:n("",e)}};var w=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$");function b(e){return w.test(e)}},158:function(e,t){e.exports=function(e){return function(t,r,i){for(var o in r)o in n&&(r[n[o]]=r[o],delete r[o]);return e(t,r,i)}};var n={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},159:function(e,t,n){"use strict";e.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},16:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(78),i=n(162),o=n(163);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,h=0;h<c;h++)if(u(e,o+h)!==u(t,h)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return K(N(t,e.length-n),e,n,r)}function A(e,t,n,r){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return A(e,t,n,r)}function x(e,t,n,r){return K(q(t),e,n,r)}function _(e,t,n,r){return K(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function C(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return o||C(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||C(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:N(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(37))},160:function(e,t,n){"use strict";e.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]},162:function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*m}},163:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},17:function(e,t,n){"use strict";function r(e,t,n){try{return e.pipeThrough(new TransformStream(t))}catch(r){const i=e.getReader();return new ReadableStream({start(e){if(t.start)return t.start(e)},async pull(e){let n=!1;const r={enqueue(t){n=!0,e.enqueue(t)}};for(;!n;){const n=await i.read();if(n.done)return t.flush&&await t.flush(e),e.close();await t.transform(n.value,r)}},cancel(t){e.cancel(t),n&&n(t)}})}}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});class i{constructor(e,t){this.blob=e,this.index=0,this.chunkSize=t||65536}pull(e){return new Promise((t,n)=>{const r=this.blob.size-this.index;if(r<=0)return e.close(),t();const i=Math.min(this.chunkSize,r),o=this.blob.slice(this.index,this.index+i),s=new FileReader;s.onload=()=>{e.enqueue(new Uint8Array(s.result)),t()},s.onerror=n,s.readAsArrayBuffer(o),this.index+=i})}}function o(e,t){return new ReadableStream(new i(e,t))}class s{constructor(e){this.streams=e,this.index=0,this.reader=null,this.nextReader()}nextReader(){const e=this.streams[this.index++];this.reader=e&&e.getReader()}async pull(e){if(!this.reader)return e.close();const t=await this.reader.read();if(t.done)return this.nextReader(),this.pull(e);e.enqueue(t.value)}}function a(e){return new ReadableStream(new s(e))}},18:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h}),n.d(t,"cancelledUpload",function(){return g}),n.d(t,"stoppedUpload",function(){return w}),n.d(t,"completedUpload",function(){return y}),n.d(t,"deletedUpload",function(){return A}),n.d(t,"stoppedDownload",function(){return b}),n.d(t,"completedDownload",function(){return v}),n.d(t,"submittedSignup",function(){return x}),n.d(t,"canceledSignup",function(){return _}),n.d(t,"loggedOut",function(){return S});var r=n(22),i=n(0),o=n(8);let s=null,a=null;const c=36e5,u=[];let l=Date.now();const f=Object(i.locale)();function h(e,t){s=e,t.on("DOMContentLoaded",()=>{a=r.a.enrolled,s.user.firstAction||(s.user.firstAction="/"===s.route?"upload":"download");const e=s.query;m("client_visit",{entrypoint:"/"===s.route?"upload":"download",referrer:document.referrer,utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term})}),t.on("experiment",E),window.addEventListener("unload",p)}function d(e){return Math.floor(Math.log10(e))}function p(){"1"!==navigator.doNotTrack&&(Object(o.i)(new Blob([JSON.stringify({now:Date.now(),session_id:l,lang:f,platform:Object(i.platform)(),events:u})],{type:"text/plain"})),u.splice(0))}async function m(e,t){const n=await s.user.metricId(),i=await s.user.deviceId(),o=Object.keys(a)[0];o&&(t.experiment=o,t.variant=a[o]),u.push({device_id:i,event_properties:t,event_type:e,time:Date.now(),user_id:n,user_properties:{anonymous:!s.user.loggedIn,first_action:s.user.firstAction,active_count:r.a.files.length}}),25===u.length&&p()}function g(e,t){return m("client_upload",{download_limit:e.dlimit,duration:d(t),file_count:e.numFiles,password_protected:!!e.password,size:d(e.size),status:"cancel",time_limit:e.timeLimit})}function y(e,t){return m("client_upload",{download_limit:e.dlimit,duration:d(t),file_count:e.numFiles,password_protected:!!e.password,size:d(e.size),status:"ok",time_limit:e.timeLimit})}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m("client_upload",{download_limit:e.dlimit,duration:d(t),file_count:e.numFiles,password_protected:!!e.password,size:d(e.size),status:"error",time_limit:e.timeLimit})}function b(e){return m("client_download",{duration:d(e.duration),password_protected:e.password_protected,size:d(e.size),status:"error"})}function v(e){return m("client_download",{duration:d(e.duration),password_protected:e.password_protected,size:d(e.size),status:"ok"})}function A(e){return m("client_delete",{age:Math.floor((Date.now()-e.createdAt)/c),downloaded:e.dtotal>0,status:"ok"})}function E(e){return m("client_experiment",e)}function x(e){return m("client_login",{status:"ok",trigger:e.trigger})}function _(e){return m("client_login",{status:"cancel",trigger:e.trigger})}function S(e){m("client_logout",{status:"ok",trigger:e.trigger}),p(),l=Date.now()}},22:function(e,t,n){"use strict";var r=n(0),i=n(38);class o{constructor(){this.items=new Map}get length(){return this.items.size}getItem(e){return this.items.get(e)}setItem(e,t){return this.items.set(e,t)}removeItem(e){return this.items.delete(e)}key(e){return this.items.keys()[e]}}t.a=new class{constructor(){try{this.engine=localStorage||new o}catch(e){this.engine=new o}this._files=this.loadFiles()}loadFiles(){const e=new Map;for(let t=0;t<this.engine.length;t++){const n=this.engine.key(t);if(Object(r.isFile)(n))try{const t=new i.a(JSON.parse(this.engine.getItem(n)));t.id||(t.id=t.fileId),e.set(t.id,t)}catch(e){this.engine.removeItem(n)}}return e}get id(){let e=this.engine.getItem("device_id");return e||(e=Object(r.arrayToB64)(crypto.getRandomValues(new Uint8Array(16))),this.engine.setItem("device_id",e)),e}get totalDownloads(){return Number(this.engine.getItem("totalDownloads"))}set totalDownloads(e){this.engine.setItem("totalDownloads",e)}get totalUploads(){return Number(this.engine.getItem("totalUploads"))}set totalUploads(e){this.engine.setItem("totalUploads",e)}get referrer(){return this.engine.getItem("referrer")}set referrer(e){this.engine.setItem("referrer",e)}get enrolled(){return JSON.parse(this.engine.getItem("ab_experiments")||"{}")}enroll(e,t){const n={};n[e]=t,this.engine.setItem("ab_experiments",JSON.stringify(n))}get files(){return Array.from(this._files.values()).sort((e,t)=>e.createdAt-t.createdAt)}get user(){try{return JSON.parse(this.engine.getItem("user"))}catch(e){return null}}set user(e){return this.engine.setItem("user",JSON.stringify(e))}getFileById(e){return this._files.get(e)}get(e){return this.engine.getItem(e)}set(e,t){return this.engine.setItem(e,t)}remove(e){Object(r.isFile)(e)&&this._files.delete(e),this.engine.removeItem(e)}addFile(e){this._files.set(e.id,e),this.writeFile(e)}writeFile(e){this.engine.setItem(e.id,JSON.stringify(e))}writeFiles(){this._files.forEach(e=>this.writeFile(e))}clearLocalFiles(){this._files.forEach(e=>this.engine.removeItem(e.id)),this._files=new Map}async merge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1,n=!1,r=!1;for(const n of e)this.getFileById(n.id)||(this.addFile(new i.a(n)),t=!0);const o=this.files.slice();for(const t of o){const i=await t.updateDownloadCount();i&&await this.writeFile(t),r=r||i,n=n||t.expired,t.expired?this.remove(t.id):e.find(e=>e.id===t.id)||(n=!0)}return{incoming:t,outgoing:n,downloadCount:r}}}},24:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p});n(16);var r=n(17);const i=12,o=16,s=16,a="encrypt",c="decrypt",u=65536,l=new TextEncoder;class f{constructor(e,t,n,r){this.mode=e,this.prevChunk,this.seq=0,this.firstchunk=!0,this.rs=n,this.ikm=t.buffer,this.salt=r}async generateKey(){const e=await crypto.subtle.importKey("raw",this.ikm,"HKDF",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"HKDF",salt:this.salt,info:l.encode("Content-Encoding: aes128gcm\0"),hash:"SHA-256"},e,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"])}async generateNonceBase(){const t=await crypto.subtle.importKey("raw",this.ikm,"HKDF",!1,["deriveKey"]),n=await crypto.subtle.exportKey("raw",await crypto.subtle.deriveKey({name:"HKDF",salt:this.salt,info:l.encode("Content-Encoding: nonce\0"),hash:"SHA-256"},t,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"]));return e.from(n.slice(0,i))}generateNonce(t){if(t>4294967295)throw new Error("record sequence number exceeds limit");const n=e.from(this.nonceBase),r=(n.readUIntBE(n.length-4,4)^t)>>>0;return n.writeUIntBE(r,n.length-4,4),n}pad(t,n){const r=t.length;if(r+o>=this.rs)throw new Error("data too large for record size");if(n){const n=e.alloc(1);return n.writeUInt8(2,0),e.concat([t,n])}{const n=e.alloc(this.rs-r-o);return n.fill(0),n.writeUInt8(1,0),e.concat([t,n])}}unpad(e,t){for(let n=e.length-1;n>=0;n--)if(e[n]){if(t){if(2!==e[n])throw new Error("delimiter of final record is not 2")}else if(1!==e[n])throw new Error("delimiter of not final record is not 1");return e.slice(0,n)}throw new Error("no delimiter found")}createHeader(){const t=e.alloc(5);return t.writeUIntBE(this.rs,0,4),t.writeUIntBE(0,4,1),e.concat([e.from(this.salt),t])}readHeader(e){if(e.length<21)throw new Error("chunk too small for reading header");const t={};t.salt=e.buffer.slice(0,s),t.rs=e.readUIntBE(s,4);const n=e.readUInt8(s+4);return t.length=n+s+5,t}async encryptRecord(t,n,r){const i=this.generateNonce(n),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},this.key,this.pad(t,r));return e.from(o)}async decryptRecord(t,n,r){const i=this.generateNonce(n),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:128},this.key,t);return this.unpad(e.from(o),r)}async start(e){if(this.mode===a)this.key=await this.generateKey(),this.nonceBase=await this.generateNonceBase(),e.enqueue(this.createHeader());else if(this.mode!==c)throw new Error("mode must be either encrypt or decrypt")}async transformPrevChunk(e,t){if(this.mode===a)t.enqueue(await this.encryptRecord(this.prevChunk,this.seq,e)),this.seq++;else{if(0===this.seq){const e=this.readHeader(this.prevChunk);this.salt=e.salt,this.rs=e.rs,this.key=await this.generateKey(),this.nonceBase=await this.generateNonceBase()}else t.enqueue(await this.decryptRecord(this.prevChunk,this.seq-1,e));this.seq++}}async transform(t,n){this.firstchunk||await this.transformPrevChunk(!1,n),this.firstchunk=!1,this.prevChunk=e.from(t.buffer)}async flush(e){this.prevChunk&&await this.transformPrevChunk(!0,e)}}class h{constructor(e,t){this.mode=t,this.rs=e,this.chunkSize=t===a?e-17:21,this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0}send(e,t){t.enqueue(e),21===this.chunkSize&&this.mode===c&&(this.chunkSize=this.rs),this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0}transform(e,t){let n=0;if(this.offset>0){const r=Math.min(e.byteLength,this.chunkSize-this.offset);this.partialChunk.set(e.slice(0,r),this.offset),this.offset+=r,n+=r,this.offset===this.chunkSize&&this.send(this.partialChunk,t)}for(;n<e.byteLength;){const r=e.byteLength-n;if(r>=this.chunkSize){const r=e.slice(n,n+this.chunkSize);n+=this.chunkSize,this.send(r,t)}else{const t=e.slice(n,n+r);n+=t.byteLength,this.partialChunk.set(t),this.offset=t.byteLength}}}flush(e){this.offset>0&&e.enqueue(this.partialChunk.slice(0,this.offset))}}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t.buffer}(s);const o=Object(r.c)(e,new h(n,"encrypt"));return Object(r.c)(o,new f("encrypt",t,n,i))}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;const i=Object(r.c)(e,new h(n,"decrypt"));return Object(r.c)(i,new f("decrypt",t,n))}}).call(this,n(16).Buffer)},30:function(e,t,n){const r=n(125),i="function"==typeof r;let o="",s={};try{s=n(!function(){var e=new Error("Cannot find module '../dist/manifest.json'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}const a=i?s:r;function c(e){return o+a[e]}const u={setPrefix:function(e){o=e},get:c,match:function(e){return Object.keys(a).filter(t=>e.test(t)).map(c)},setMiddleware:function(e){function t(){return JSON.parse(e.fileSystem.readFileSync(e.getFilenameFromUrl("/manifest.json")))}e&&(u.get=function(e){const n=t();return o+n[e]},u.match=function(e){const n=t();return Object.keys(n).filter(t=>e.test(t)).map(e=>o+n[e])})}};e.exports=u},34:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(24);const o=new TextEncoder,s=new TextDecoder;class a{constructor(e,t){this._nonce=t||"yRCdyQ1EMSA3mo4rqSkuNQ==",this.rawSecret=e?Object(r.b64ToArray)(e):crypto.getRandomValues(new Uint8Array(16)),this.secretKeyPromise=crypto.subtle.importKey("raw",this.rawSecret,"HKDF",!1,["deriveKey"]),this.metaKeyPromise=this.secretKeyPromise.then(function(e){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:o.encode("metadata"),hash:"SHA-256"},e,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}),this.authKeyPromise=this.secretKeyPromise.then(function(e){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:o.encode("authentication"),hash:"SHA-256"},e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign"])})}get nonce(){return this._nonce}set nonce(e){e&&e!==this._nonce&&(this._nonce=e)}setPassword(e,t){this.authKeyPromise=crypto.subtle.importKey("raw",o.encode(e),{name:"PBKDF2"},!1,["deriveKey"]).then(e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:o.encode(t),iterations:100,hash:"SHA-256"},e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]))}setAuthKey(e){this.authKeyPromise=crypto.subtle.importKey("raw",Object(r.b64ToArray)(e),{name:"HMAC",hash:"SHA-256"},!0,["sign"])}async authKeyB64(){const e=await this.authKeyPromise,t=await crypto.subtle.exportKey("raw",e);return Object(r.arrayToB64)(new Uint8Array(t))}async authHeader(){const e=await this.authKeyPromise,t=await crypto.subtle.sign({name:"HMAC"},e,Object(r.b64ToArray)(this.nonce));return"send-v1 ".concat(Object(r.arrayToB64)(new Uint8Array(t)))}async encryptMetadata(e){const t=await this.metaKeyPromise;return await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},t,o.encode(JSON.stringify({name:e.name,size:e.size,type:e.type||"application/octet-stream",manifest:e.manifest||{}})))}encryptStream(e){return Object(i.c)(e,this.rawSecret)}decryptStream(e){return Object(i.b)(e,this.rawSecret)}async decryptMetadata(e){const t=await this.metaKeyPromise,n=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},t,e);return JSON.parse(s.decode(n))}}},37:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},38:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(34),i=n(0),o=n(8);class s{constructor(e){if(!e.manifest)throw new Error("invalid file object");this.id=e.id,this.url=e.url,this.name=e.name,this.size=e.size,this.manifest=e.manifest,this.time=e.time,this.speed=e.speed,this.createdAt=e.createdAt,this.expiresAt=e.expiresAt,this.ownerToken=e.ownerToken,this.dlimit=e.dlimit||1,this.dtotal=e.dtotal||0,this.keychain=new r.a(e.secretKey,e.nonce),this._hasPassword=!!e.hasPassword,this.timeLimit=e.timeLimit}get hasPassword(){return!!this._hasPassword}get expired(){return this.dlimit===this.dtotal||Date.now()>this.expiresAt}async setPassword(e){try{return this.password=e,this._hasPassword=!0,this.keychain.setPassword(e,this.url),await Object(o.n)(this.id,this.ownerToken,this.keychain)}catch(e){throw this.password=null,this._hasPassword=!1,e}}del(){return Object(o.a)(this.id,this.ownerToken)}changeLimit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dlimit!==e?(this.dlimit=e,Object(o.m)(this.id,this.ownerToken,t.bearerToken,{dlimit:e})):Promise.resolve(!0)}async updateDownloadCount(){const e=this.dtotal,t=this.dlimit;try{const e=await Object(o.c)(this.id,this.ownerToken);this.dtotal=e.dtotal,this.dlimit=e.dlimit}catch(e){"404"===e.message&&(this.dtotal=this.dlimit)}return e!==this.dtotal||t!==this.dlimit}toJSON(){return{id:this.id,url:this.url,name:this.name,size:this.size,manifest:this.manifest,time:this.time,speed:this.speed,createdAt:this.createdAt,expiresAt:this.expiresAt,secretKey:Object(i.arrayToB64)(this.keychain.rawSecret),ownerToken:this.ownerToken,dlimit:this.dlimit,dtotal:this.dtotal,hasPassword:this.hasPassword,timeLimit:this.timeLimit}}}},45:function(e,t,n){var r=n(122),i=n(60);function o(e){if(!(this instanceof o))return new o(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=o,o.prototype.emit=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var o=i(this._name+"('"+e.toString()+"')"),s=this._listeners[e];return s&&s.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},o.prototype.on=o.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},o.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},o.prototype.once=function(e,t){var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},o.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},o.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},o.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},o.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,i=0;i<r;i++)n.push(t[i]);return n},o.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var i=e.length,o=0;o<i;o++){var s=e[o];s.apply(s,n)}}}},554:function(e,t,n){e.exports=n(555)},555:function(e,t,n){const r=2147483648,i=new(n(556));function o(e,t,n=[]){const r=document.createElement(e);for(const e in t)0===e.indexOf("on")?r[e]=t[e]:"htmlFor"===e?r.htmlFor=t.htmlFor:"className"===e?r.className=t.className:r.setAttribute(e,t[e]);n instanceof Array||(n=[n]);for(let e of n)"string"==typeof e&&(e=document.createTextNode(e)),r.appendChild(e);return r}const s={storage:{files:[],remove:function(e){console.log("REMOVE FILEID",e)},writeFile:function(e){console.log("WRITEFILE",e)},addFile:function(e){document.body.innerHTML="";const t=o("input",{id:"url",value:e.url}),n=o("button",{id:"copy-button",className:"button",onclick:()=>{window.webkit.messageHandlers.copy.postMessage(t.value),n.textContent="Copied!",setTimeout(function(){n.textContent="Copy to clipboard"},2e3)}},"Copy to clipboard"),r=o("div",{id:"striped"},o("div",{id:"white"},[t,n,o("button",{id:"send-another",className:"button",onclick:c},"Send another file")]));document.body.appendChild(r)},totalUploads:0},transfer:null,uploading:!1,settingPassword:!1,passwordSetError:null,route:"/"};function a(e){console.log("UPLOAD"),e.preventDefault();const t=e.target.files[0];0!==t.size&&(t.size>r?console.log("file too big (no bigger than "+r+")"):i.emit("upload",{file:t,type:"click"}))}function c(){document.body.innerHTML="";const e=o("div",{id:"striped"},o("div",{id:"white"},[o("label",{id:"label",htmlFor:"input"},"Choose file"),o("input",{id:"input",type:"file",name:"input",onchange:a})]));document.body.appendChild(e)}i.on("render",function(){document.body.innerHTML="";const e=o("div",{style:"background-color: white; width: 100%"},o("span",{style:`display: inline-block; width: ${s.transfer.progress[0]/s.transfer.progress[1]*100}%; background-color: blue`}));document.body.appendChild(e)}),i.on("pushState",function(e){console.log("pushState "+e+" "+JSON.stringify(s))});const u=n(102).default;try{u(s,i)}catch(e){console.error("error"+e),console.error(e)}window.sendBase64EncodedFromSwift=function(e){fetch(e).then(e=>e.blob()).then(e=>{i.emit("upload",{file:e,type:"share"})})},c(),window.webkit.messageHandlers.loaded.postMessage("")},556:function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},57:function(e,t,n){e.exports=n(155)},60:function(e,t,n){var r,i=n(120)();o.disabled=!0;try{r=window.performance,o.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function o(e){if(o.disabled)return s;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function a(o){var s="end-"+t+"-"+e;r.mark(s),i.push(function(){var i=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(e){i=e}o&&o(i,e)})}return r.mark(n),a.uuid=t,a}function s(e){e&&i.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=o},61:function(e,t,n){var r=n(11);e.exports=function(e){return function(t,n,i){var o,s,a;return(a=document.createElement("send-ok-dialog")).setAttribute("class","flex flex-col max-w-sm p-4 m-auto"),r(a,["\n        ",(o=document.createElement("h2"),o.setAttribute("class","text-center text-xl font-bold m-8 leading-normal"),r(o,["\n          ",e,"\n        "]),o),"\n        ",(s=document.createElement("button"),s.onclick=i,s.setAttribute("title",""+String(t.translate("okButton"))),s.setAttribute("class","btn rounded-lg w-full flex-shrink-0"),r(s,["\n          ",t.translate("okButton"),"\n        "]),s),"\n      "]),a}}},78:function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},8:function(e,t,n){"use strict";n.d(t,"l",function(){return a}),n.d(t,"g",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"j",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"m",function(){return g}),n.d(t,"c",function(){return y}),n.d(t,"h",function(){return w}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return E}),n.d(t,"b",function(){return _}),n.d(t,"f",function(){return S}),n.d(t,"k",function(){return k}),n.d(t,"i",function(){return L}),n.d(t,"e",function(){return R});var r=n(0),i=n(24);let o=null;try{o=localStorage.getItem("wssURL")}catch(e){}o||(o="wss://send.firefox.com/api/ws");class s extends Error{constructor(e,t,n){super(e?"0":"connection closed"),this.cancelled=e,this.duration=t,this.size=n}}function a(e){localStorage&&localStorage.setItem("wssURL",e),o=e}function c(){return o}let u="";function l(e){return u+e}function f(e){u=e}function h(e,t){const n={"Content-Type":"application/json"};return t&&(n.Authentication="Bearer ".concat(t)),{method:"POST",headers:new Headers(n),body:JSON.stringify(e)}}function d(e){return(e=e||"").split(" ")[1]}async function p(e,t,n){const r={};t=t||{};const i=await n.authHeader();t.headers=new Headers({Authorization:i});const o=await fetch(e,t);r.response=o,r.ok=o.ok;const s=d(o.headers.get("WWW-Authenticate"));return r.shouldRetry=401===o.status&&s!==n.nonce,n.nonce=s,r}async function m(e,t){return(await fetch(l("/api/delete/".concat(e)),h({owner_token:t}))).ok}async function g(e,t,n,r){return(await fetch(l("/api/params/".concat(e)),h({owner_token:t,dlimit:r.dlimit},n))).ok}async function y(e,t){const n=await fetch(l("/api/info/".concat(e)),h({owner_token:t}));if(n.ok){return await n.json()}throw new Error(n.status)}async function w(e,t){const n=await async function(e,t,n){const r=await p(e,t,n);return r.shouldRetry?p(e,t,n):r}(l("/api/metadata/".concat(e)),{method:"GET"},t);if(n.ok){const e=await n.response.json(),i=await t.decryptMetadata(Object(r.b64ToArray)(e.metadata));return{size:i.size,ttl:e.ttl,iv:i.iv,name:i.name,type:i.type,manifest:i.manifest}}throw new Error(n.response.status)}async function b(e,t,n){const r=await n.authKeyB64();return(await fetch(l("/api/password/".concat(e)),h({owner_token:t,auth:r}))).ok}function v(e,t){return new Promise((n,r)=>{function i(n){e.removeEventListener("message",o),r(new s(t.cancelled))}function o(t){e.removeEventListener("close",i);try{const e=JSON.parse(t.data);if(e.error)throw new Error(e.error);n(e)}catch(e){r(e)}}e.addEventListener("message",o,{once:!0}),e.addEventListener("close",i,{once:!0})})}async function A(e,t,n,a,c,u,l,f){let h=0;const d=Date.now(),p=window.location.hostname,m=window.location.port,g="https:"===window.location.protocol?"wss:":"ws:",y="file:"===window.location.protocol?o:"".concat(g,"//").concat(p).concat(m?":":"").concat(m,"/api/ws"),w=await(b=y,new Promise((e,t)=>{try{const n=new WebSocket(b);n.addEventListener("open",()=>e(n),{once:!0})}catch(e){t(new s(!1))}}));var b;try{const o={fileMetadata:Object(r.arrayToB64)(new Uint8Array(t)),authorization:"send-v1 ".concat(n),bearer:u,timeLimit:a,dlimit:c},s=v(w,f);w.send(JSON.stringify(o));const p=await s,m=v(w,f),g=e.getReader();let y=await g.read();for(;!y.done&&(f.cancelled&&w.close(),w.readyState===WebSocket.OPEN);){const e=y.value;for(w.send(e),l(h),h+=e.length,y=await g.read();w.bufferedAmount>2*i.a&&w.readyState===WebSocket.OPEN&&!f.cancelled;)await Object(r.delay)()}return w.readyState===WebSocket.OPEN&&w.send(new Uint8Array([0])),await m,p.duration=Date.now()-d,p}catch(e){throw e.size=h,e.duration=Date.now()-d,e}finally{[WebSocket.CLOSED,WebSocket.CLOSING].includes(w.readyState)||w.close()}}function E(e,t,n,r,i,o,s){const a={cancelled:!1};return{cancel:function(){a.cancelled=!0},result:A(e,t,n,r,i,o,s,a)}}async function x(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;try{return await async function(e,t,n,r){const i=await t.authHeader(),o=new XMLHttpRequest;return r.oncancel=function(){o.abort()},new Promise(function(s,a){o.addEventListener("loadend",function(){r.oncancel=function(){};const e=o.getResponseHeader("WWW-Authenticate");if(e&&(t.nonce=d(e)),200!==o.status)return a(new Error(o.status));const n=new Blob([o.response]);s(n)}),o.addEventListener("progress",function(e){200===e.target.status&&n(e.loaded)}),o.open("get",l("/api/download/blob/".concat(e))),o.setRequestHeader("Authorization",i),o.responseType="blob",o.send(),n(0)})}(e,t,n,r)}catch(o){if("401"===o.message&&--i>0)return x(e,t,n,r,i);throw o}}function _(e,t,n){const r={oncancel:function(){}};return{cancel:function(){r.oncancel()},result:x(e,t,n,r)}}async function S(e,t){const n=new Headers({Authorization:"Bearer ".concat(e)}),r=await fetch(l("/api/filelist/".concat(t)),{headers:n});if(r.ok){return await r.blob()}throw new Error(r.status)}async function k(e,t,n){const r=new Headers({Authorization:"Bearer ".concat(e)});return(await fetch(l("/api/filelist/".concat(t)),{headers:r,method:"POST",body:n})).ok}function L(e){if(navigator.sendBeacon)try{navigator.sendBeacon(l("/api/metrics"),e)}catch(e){console.error(e)}}async function R(){const e=await fetch(l("/config"));if(e.ok){return await e.json()}throw new Error(e.status)}},80:function(e,t,n){var r=n(11);const{copyToClipboard:i}=n(0);e.exports=function(e,t){const n=function(n,o,s){var a,c,u,l,f,h,d;return(d=document.createElement("send-copy-dialog")).setAttribute("class","flex flex-col items-center text-center p-4 max-w-sm m-auto"),r(d,["\n        ",(a=document.createElement("h1"),a.setAttribute("class","text-3xl font-bold my-4"),r(a,["\n          ",n.translate("notifyUploadEncryptDone"),"\n        "]),a),"\n        ",(u=document.createElement("p"),u.setAttribute("class","font-normal leading-normal text-grey-80 word-break-all dark:text-grey-40"),r(u,["\n          ",n.translate("copyLinkDescription")," ",(c=document.createElement("br"),c),"\n          ",e,"\n        "]),u),"\n        ",(l=document.createElement("input"),l.setAttribute("type","text"),l.setAttribute("id","share-url"),l.setAttribute("value",""+String(t)),l.setAttribute("readonly","readonly"),l.setAttribute("class","w-full my-4 border rounded-lg leading-loose h-12 px-2 py-1 dark:bg-grey-80"),l),"\n        ",(f=document.createElement("button"),f.onclick=function(e){e.stopPropagation(),i(t),e.target.textContent=n.translate("copiedUrl"),setTimeout(s,1e3)},f.setAttribute("title",""+String(n.translate("copyLinkButton"))),f.setAttribute("class","btn rounded-lg w-full flex-shrink-0 focus:outline"),r(f,["\n          ",n.translate("copyLinkButton"),"\n        "]),f),"\n        ",(h=document.createElement("button"),h.onclick=s,h.setAttribute("title",""+String(n.translate("okButton"))),h.setAttribute("class","link-blue my-4 font-medium cursor-pointer focus:outline"),r(h,["\n          ",n.translate("okButton"),"\n        "]),h),"\n      "]),d};return n.type="copy",n}},81:function(e,t,n){var r=n(11);e.exports=function(e,t){const n=function(n,i,o){var s,a,c,u,l,f,h;return(h=document.createElement("send-share-dialog")).setAttribute("class","flex flex-col items-center text-center p-4 max-w-sm m-auto"),r(h,["\n        ",(s=document.createElement("h1"),s.setAttribute("class","text-3xl font-bold my-4"),r(s,["\n          ",n.translate("notifyUploadEncryptDone"),"\n        "]),s),"\n        ",(c=document.createElement("p"),c.setAttribute("class","font-normal leading-normal text-grey-80 word-break-all dark:text-grey-40"),r(c,["\n          ",n.translate("shareLinkDescription"),(a=document.createElement("br"),a),"\n          ",e,"\n        "]),c),"\n        ",(u=document.createElement("input"),u.setAttribute("type","text"),u.setAttribute("id","share-url"),u.setAttribute("value",""+String(t)),u.setAttribute("readonly","readonly"),u.setAttribute("class","w-full my-4 border rounded-lg leading-loose h-12 px-2 py-1 dark:bg-grey-80"),u),"\n        ",(l=document.createElement("button"),l.onclick=async function(r){r.stopPropagation();try{await navigator.share({title:n.translate("-send-brand"),text:n.translate("shareMessage",{name:e}),url:t})}catch(e){if(e.code===e.ABORT_ERR)return;console.error(e)}o()},l.setAttribute("title",""+String(n.translate("shareLinkButton"))),l.setAttribute("class","btn rounded-lg w-full flex-shrink-0 focus:outline"),r(l,["\n          ",n.translate("shareLinkButton"),"\n        "]),l),"\n        ",(f=document.createElement("button"),f.onclick=o,f.setAttribute("title",""+String(n.translate("okButton"))),f.setAttribute("class","link-blue my-4 font-medium cursor-pointer focus:outline"),r(f,["\n          ",n.translate("okButton"),"\n        "]),f),"\n      "]),h};return n.type="share",n}},82:function(e,t,n){var r=n(11);const i=n(30),{bytes:o,platform:s}=n(0),{canceledSignup:a,submittedSignup:c}=n(18);e.exports=function(e){return function(t,n,u){var l,f,h,d,p,m,g,y,w,b,v,A,E,x,_;const S=Math.floor(t.LIMITS.MAX_EXPIRE_SECONDS/86400),k="android"===s()?"hidden":"";let L=!1;return(_=document.createElement("send-signup-dialog")).setAttribute("class","flex flex-col lg:flex-row justify-center px-8 md:px-24 w-full h-full"),r(_,["\n        ",(l=document.createElement("img"),l.setAttribute("src",""+String(i.get("master-logo.svg"))),l.setAttribute("class","h-16 mt-1 mb-4"),l),"\n        ",(w=document.createElement("section"),w.setAttribute("class","flex flex-col flex-shrink-0 self-center lg:mx-6 lg:max-w-xs"),r(w,["\n          ",(f=document.createElement("h1"),f.setAttribute("class","text-3xl font-bold text-center lg:text-left"),r(f,["\n            ",t.translate("accountBenefitTitle"),"\n          "]),f),"\n          ",(y=document.createElement("ul"),y.setAttribute("class","leading-normal list-disc text-grey-80 my-2 mt-4 pl-4 md:self-center dark:text-grey-40"),r(y,["\n            ",(h=document.createElement("li"),r(h,["\n              ",t.translate("accountBenefitLargeFiles",{size:o(t.LIMITS.MAX_FILE_SIZE)}),"\n            "]),h),"\n            ",(d=document.createElement("li"),r(d,[t.translate("accountBenefitDownloadCount")]),d),"\n            ",(p=document.createElement("li"),r(p,["\n              ",t.translate("accountBenefitTimeLimit",{count:S}),"\n            "]),p),"\n            ",(m=document.createElement("li"),r(m,[t.translate("accountBenefitSync")]),m),"\n            ",(g=document.createElement("li"),r(g,[t.translate("accountBenefitMoz")]),g),"\n          "]),y),"\n        "]),w),"\n        ",(x=document.createElement("section"),x.setAttribute("class","flex flex-col flex-grow m-4 md:self-center md:w-128 lg:max-w-xs"),r(x,["\n          ",(A=document.createElement("form"),A.onsubmit=function(t){if(t.preventDefault(),L)return;L=!0;const r=document.getElementById("email-input").value;c({trigger:e}),n("login",function(e){if(!e)return!1;const t=e.split("@");return 2===t.length&&t.every(e=>e.length>0)}(r)?r:null)},A.setAttribute("data-no-csrf","data-no-csrf"),r(A,["\n            ",(b=document.createElement("input"),b.setAttribute("id","email-input"),b.setAttribute("type","email"),b.setAttribute("placeholder",""+String(t.translate("emailPlaceholder"))),b.setAttribute("class",String(k)+" border rounded-lg w-full px-2 py-1 h-12 mb-3 text-lg text-grey-70 leading-loose dark:bg-grey-80 dark:text-white"),b),"\n            ",(v=document.createElement("input"),v.setAttribute("value",""+String(t.translate("signInOnlyButton"))),v.setAttribute("title",""+String(t.translate("signInOnlyButton"))),v.setAttribute("id","email-submit"),v.setAttribute("type","submit"),v.setAttribute("class","btn rounded-lg w-full flex flex-shrink-0 items-center justify-center"),v),"\n          "]),A),"\n          ",(E=document.createElement("button"),E.setAttribute("title",""+String(t.translate("deletePopupCancel"))),E.onclick=function(t){a({trigger:e}),u(t)},E.setAttribute("class","my-3 link-blue font-medium"),r(E,["\n            ",t.translate("deletePopupCancel"),"\n          "]),E),"\n        "]),x),"\n      "]),_}}},83:function(e,t,n){var r=n(11);const i=n(105).version,{browserName:o}=n(0);e.exports=function(){return function(e,t,n){var s,a,c,u,l;const f="".concat(e.PREFS.surveyUrl,"?ver=").concat(i,"&browser=").concat(o(),"&anon=").concat(e.user.loggedIn,"&active_count=").concat(e.storage.files.length);return(l=document.createElement("send-survey-dialog")).setAttribute("class","flex flex-col items-center text-center p-4 max-w-sm m-auto"),r(l,["\n        ",(s=document.createElement("h1"),s.setAttribute("class","text-3xl font-bold my-4"),r(s,["\n          Tell us what you think.\n        "]),s),"\n        ",(a=document.createElement("p"),a.setAttribute("class","font-normal leading-normal text-grey-80 px-4"),r(a,["\n          Love Firefox Send? Take a quick survey to let us know how we can make\n          it better.\n        "]),a),"\n        ",(c=document.createElement("a"),c.onclick=()=>t("closeModal"),c.setAttribute("title","Give feedback"),c.setAttribute("href",""+String(f)),c.setAttribute("target","_blank"),c.setAttribute("class","btn rounded-lg w-full flex-shrink-0 focus:outline my-5"),r(c,["\n          Give feedback\n        "]),c),"\n        ",(u=document.createElement("button"),u.onclick=n,u.setAttribute("title","Skip"),u.setAttribute("class","link-blue font-medium cursor-pointer focus:outline"),r(u,["\n          Skip\n        "]),u),"\n      "]),l}}},91:function(e,t,n){"use strict";e.exports=["indeterminate"]}});
//# sourceMappingURL=ios.56c42740.js.map